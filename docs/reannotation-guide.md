# é‡æ¨™è¨»åŠŸèƒ½ä½¿ç”¨æŒ‡å—

## ğŸ“– åŠŸèƒ½æ¦‚è¿°

é‡æ¨™è¨»ï¼ˆRe-annotationï¼‰åŠŸèƒ½æ—¨åœ¨æå‡å¤šäººæ¨™è¨»ç³»çµ±çš„ä¸€è‡´æ€§ï¼Œé‡å°ä¸€è‡´æ€§è¼ƒä½çš„è³‡æ–™é …ç›®ï¼Œè®“æ¨™è¨»è€…é‡æ–°æª¢è¦–ä¸¦ä¿®æ”¹æ¨™è¨»å…§å®¹ã€‚

### æ ¸å¿ƒç‰¹è‰²

âœ… **æ–¹æ¡ˆ A è¨­è¨ˆ**ï¼šé¡¯ç¤ºçµ±è¨ˆè³‡è¨Š + æ¨™è¨»æŒ‡å¼•ï¼ˆä¸é¡¯ç¤ºä»–äººé€ç­†ç­”æ¡ˆï¼‰
âœ… **ä»»å‹™åˆ†çµ„**ï¼šé¿å…æ¨™è¨»è€…æ··äº‚ï¼Œåˆ†ç‚ºå…©çµ„è™•ç†
âœ… **ç‰ˆæœ¬æ§åˆ¶**ï¼šè¨˜éŒ„æ¯æ¬¡ä¿®æ”¹ï¼Œé¿å…æ¨™è¨˜éæœŸå•é¡Œ
âœ… **å¯©è¨ˆæ—¥èªŒ**ï¼šå®Œæ•´è¿½è¹¤æ‰€æœ‰è®Šæ›´æ­·ç¨‹
âœ… **å …æŒç­”æ¡ˆæ©Ÿåˆ¶**ï¼šå…è¨±æ¨™è¨»è€…å …æŒè‡ªå·±çš„åˆ¤æ–·

---

## ğŸ—‚ï¸ ä»»å‹™åˆ†çµ„ç­–ç•¥

ç‚ºé¿å…ä¸€æ¬¡æ··åœ¨ä¸€èµ·é€ æˆæ··äº‚ï¼Œå››å€‹æ¨™è¨»æ¬„ä½åˆ†ç‚ºå…©çµ„ï¼š

### **Group 1: æ‰¿è«¾èˆ‡æ™‚é–“è»¸**
- `promise_status` (æ‰¿è«¾ç‹€æ…‹)
- `verification_timeline` (é©—è­‰æ™‚é–“è»¸)

### **Group 2: è­‰æ“šç‹€æ…‹èˆ‡å“è³ª**
- `evidence_status` (è­‰æ“šç‹€æ…‹)
- `evidence_quality` (è­‰æ“šå“è³ª)

**å»ºè­°æµç¨‹**ï¼šå…ˆå®Œæˆ Group 1 çš„é‡æ¨™è¨»ï¼Œå†é€²è¡Œ Group 2ã€‚

---

## ğŸ¯ æ™ºæ…§åˆ†é…ç­–ç•¥

ç³»çµ±æ¡ç”¨**å°‘æ•¸æ´¾åŸå‰‡**ï¼Œæ¸›å°‘ä¸å¿…è¦çš„é‡æ¨™è¨»å·¥ä½œé‡ï¼š

### ç¯„ä¾‹æƒ…å¢ƒ

**æƒ…æ³ 1: æœ‰æ˜ç¢ºå°‘æ•¸æ´¾ï¼ˆ2:1ï¼‰**
- æ¨™è¨»è€… A: `promise_status = "Yes"`
- æ¨™è¨»è€… B: `promise_status = "Yes"`
- æ¨™è¨»è€… C: `promise_status = "No"`

â†’ **åªåˆ†é…çµ¦ C**ï¼ˆå°‘æ•¸æ´¾ï¼‰

**æƒ…æ³ 2: ä¸‰å€‹äººéƒ½ä¸ä¸€æ¨£ï¼ˆ1:1:1ï¼‰**
- æ¨™è¨»è€… A: `promise_status = "Yes"`
- æ¨™è¨»è€… B: `promise_status = "No"`
- æ¨™è¨»è€… C: `promise_status = "Unclear"`

â†’ **åˆ†é…çµ¦ Aã€Bã€C å…¨éƒ¨ä¸‰å€‹äºº**

**æƒ…æ³ 3: å¤šå€‹ä»»å‹™æ··åˆ**
å‡è¨­ Group 1 æœ‰å…©å€‹ä»»å‹™ï¼š
- `promise_status`: A=Yes, B=Yes, C=No â†’ C æ˜¯å°‘æ•¸æ´¾
- `verification_timeline`: A=within_2_years, B=within_2_years, C=within_2_years â†’ ä¸€è‡´

â†’ **åªåˆ†é…çµ¦ C**

**æƒ…æ³ 4: æœ‰ä»»å‹™ä¸‰äººéƒ½ä¸åŒ**
- `promise_status`: A=Yes, B=Yes, C=No â†’ C æ˜¯å°‘æ•¸æ´¾
- `verification_timeline`: A=within_2_years, B=more_than_2_years, C=Unclear â†’ ä¸‰äººéƒ½ä¸åŒ

â†’ **åˆ†é…çµ¦ Aã€Bã€C å…¨éƒ¨ä¸‰å€‹äºº**ï¼ˆå› ç‚ºæœ‰ä¸€å€‹ä»»å‹™ä¸‰äººéƒ½ä¸åŒï¼‰

---

## ğŸš€ ä½¿ç”¨æµç¨‹ï¼ˆç®¡ç†å“¡ï¼‰

### æ­¥é©Ÿ 1: åŸ·è¡Œè³‡æ–™åº«é·ç§»

é¦–æ¬¡ä½¿ç”¨å‰ï¼Œéœ€è¦åŸ·è¡Œè³‡æ–™åº«é·ç§»è…³æœ¬ï¼š

```bash
npm run migrate:reannotation
```

é€™å°‡å»ºç«‹ä»¥ä¸‹è³‡æ–™è¡¨ï¼š
- `reannotation_rounds` - é‡æ¨™è¨»è¼ªæ¬¡è¨˜éŒ„
- `reannotation_tasks` - ä»»å‹™åˆ†é…è¨˜éŒ„
- `agreement_scores_cache` - ä¸€è‡´æ€§åˆ†æ•¸å¿«å–
- `reannotation_audit_log` - å¯©è¨ˆæ—¥èªŒ
- åœ¨ `annotations` è¡¨æ–°å¢æ¬„ä½ (`reannotation_round`, `version`, `persist_answer` ç­‰)

### æ­¥é©Ÿ 2: è¨ˆç®—ä¸€è‡´æ€§ä¸¦å»ºç«‹è¼ªæ¬¡

1. ç™»å…¥ç®¡ç†å“¡å¸³è™Ÿ
2. å‰å¾€ **ç®¡ç†å¾Œå°** â†’ **ğŸ”„ é‡æ¨™è¨»ç®¡ç†**
3. é¸æ“‡å·²å®Œæˆæ¨™è¨»çš„å°ˆæ¡ˆ
4. é¸æ“‡ä»»å‹™çµ„åˆ¥ï¼ˆGroup 1 æˆ– Group 2ï¼‰
5. è¨­å®šä¸€è‡´æ€§é–€æª»ï¼ˆé è¨­ 0.5ï¼Œå»ºè­°å€¼ 0.3-0.6ï¼‰
6. é»æ“Šã€Œå»ºç«‹é‡æ¨™è¨»è¼ªæ¬¡ã€

ç³»çµ±æœƒè‡ªå‹•ï¼š
- è¨ˆç®—æ¯ç­†è³‡æ–™çš„ **Local Krippendorff's Alpha**
- æ‰¾å‡ºåˆ†æ•¸ < é–€æª»çš„è³‡æ–™
- **æ™ºæ…§åˆ†é…é‡æ¨™è¨»ä»»å‹™**ï¼š
  - å¦‚æœä¸‰å€‹äººä¸­æœ‰ä¸€å€‹äººå’Œå…¶ä»–å…©å€‹äººä¸ä¸€æ¨£ â†’ åªçµ¦é‚£å€‹ä¸ä¸€æ¨£çš„äºº
  - å¦‚æœä¸‰å€‹äººéƒ½ä¸ä¸€æ¨£ â†’ çµ¦å…¨éƒ¨ä¸‰å€‹äºº

### æ­¥é©Ÿ 3: é€šçŸ¥æ¨™è¨»è€…

ç³»çµ±æœƒè‡ªå‹•åœ¨æ¨™è¨»è€…ä¸»é é¡¯ç¤ºå¾…è™•ç†ä»»å‹™æç¤ºã€‚ç®¡ç†å“¡ä¹Ÿå¯å¦è¡Œé€šçŸ¥ã€‚

---

## ğŸ‘¥ ä½¿ç”¨æµç¨‹ï¼ˆæ¨™è¨»è€…ï¼‰

### æ­¥é©Ÿ 1: æŸ¥çœ‹ä»»å‹™

ç™»å…¥å¾Œï¼Œåœ¨ä¸»é æœƒçœ‹åˆ°é‡æ¨™è¨»ä»»å‹™æç¤ºï¼š

```
ğŸ”„ ä½ æœ‰ X å€‹é‡æ¨™è¨»ä»»å‹™å¾…è™•ç†
ç®¡ç†å“¡ç™¼ç¾éƒ¨åˆ†æ¨™è¨»çš„ä¸€è‡´æ€§è¼ƒä½ï¼Œéœ€è¦æ‚¨é‡æ–°æª¢è¦–ä¸¦ä¿®æ”¹ã€‚
[å‰å¾€è™•ç†é‡æ¨™è¨»ä»»å‹™ â†’]
```

é»æ“ŠæŒ‰éˆ•æˆ–ç›´æ¥å‰å¾€ `/reannotation` æŸ¥çœ‹ä»»å‹™æ¸…å–®ã€‚

### æ­¥é©Ÿ 2: è™•ç†ä»»å‹™

æ¯å€‹ä»»å‹™é é¢é¡¯ç¤ºï¼š

1. **PDF é è¦½** - æŸ¥çœ‹åŸå§‹æ–‡ä»¶
2. **æ°¸çºŒæ‰¿è«¾æ–‡æœ¬** - å®Œæ•´çš„æ¨™è¨»å…§å®¹
3. **è­¦å‘Šé¢æ¿** - é¡¯ç¤ºå“ªäº›é …ç›®éœ€è¦é‡æ–°æª¢è¦–åŠå…¶ Local Alpha åˆ†æ•¸
4. **æ¨™è¨»æŒ‡å¼•** - æä¾›æ˜ç¢ºçš„åˆ¤å®šæ¨™æº–
5. **æ¨™è¨»è¡¨å–®** - é‡æ–°å¡«å¯«æ¨™è¨»å…§å®¹

**é‡è¦**ï¼šæ¨™è¨»è€…**ç„¡æ³•çœ‹åˆ°**å…¶ä»–äººçš„é€ç­†ç­”æ¡ˆï¼Œåªèƒ½çœ‹åˆ°ï¼š
- å“ªäº›é …ç›®ä¸€è‡´æ€§ä½
- Local Alpha åˆ†æ•¸
- æ¨™è¨»æŒ‡å¼•å’Œåˆ¤å®šæ¨™æº–

### æ­¥é©Ÿ 3: é€å‡ºé‡æ¨™è¨»

å¡«å¯«å®Œæˆå¾Œï¼š

- âœ… å‹¾é¸ã€Œæˆ‘ä»å …æŒæˆ‘çš„åŸå§‹ç­”æ¡ˆã€ï¼ˆé¸å¡«ï¼‰ï¼šå¦‚æœç¶“éé‡æ–°æª¢è¦–å¾Œä»èªç‚ºè‡ªå·±çš„ç­”æ¡ˆæ­£ç¢º
- ğŸ“ å¡«å¯«å‚™è¨»ï¼ˆé¸å¡«ï¼‰ï¼šèªªæ˜ä¿®æ”¹ç†ç”±æˆ–å …æŒåŸç­”æ¡ˆçš„åŸå› 
- é»æ“Šã€Œé€å‡ºé‡æ¨™è¨»ã€

---

## ğŸ“Š è³‡æ–™çµæ§‹èªªæ˜

### annotations è¡¨æ–°å¢æ¬„ä½

| æ¬„ä½åç¨± | é¡å‹ | èªªæ˜ |
|---------|------|------|
| `reannotation_round` | INTEGER | æ­¤æ¨™è¨»æ˜¯åœ¨ç¬¬å¹¾è¼ªç”¢ç”Ÿçš„ (0=åˆå§‹æ¨™è¨») |
| `version` | INTEGER | åŒä¸€è¼ªå…§çš„ç‰ˆæœ¬è™Ÿ (æ¯æ¬¡ä¿®æ”¹+1) |
| `last_agreement_score` | JSONB | æœ€å¾Œä¸€æ¬¡è¨ˆç®—çš„å±€éƒ¨åˆ†æ•¸ |
| `persist_answer` | BOOLEAN | ä½¿ç”¨è€…æ˜¯å¦å …æŒæ­¤ç­”æ¡ˆ |
| `reannotation_comment` | TEXT | é‡æ¨™è¨»å‚™è¨» |

### reannotation_rounds è¡¨

è¨˜éŒ„æ¯ä¸€è¼ªé‡æ¨™è¨»çš„è³‡è¨Šï¼š

- `round_number`: è¼ªæ¬¡ç·¨è™Ÿ
- `task_group`: ä»»å‹™åˆ†çµ„ (group1/group2)
- `threshold`: ä¸€è‡´æ€§é–€æª»
- `status`: è¼ªæ¬¡ç‹€æ…‹ (active/completed/cancelled)

### reannotation_tasks è¡¨

è¨˜éŒ„æ¯ä½æ¨™è¨»è€…çš„é‡æ¨™è¨»ä»»å‹™ï¼š

- `source_data_id`: è³‡æ–™ ID
- `user_id`: æ¨™è¨»è€… ID
- `task_group`: ä»»å‹™åˆ†çµ„
- `tasks_flagged`: éœ€è¦é‡æ–°æª¢è¦–çš„é …ç›®åŠåˆ†æ•¸ (JSONB)
- `status`: ä»»å‹™ç‹€æ…‹ (pending/in_progress/submitted/skipped)

### reannotation_audit_log è¡¨

è¨˜éŒ„æ‰€æœ‰æ¨™è¨»ä¿®æ”¹æ­·ç¨‹ï¼š

- `task_name`: ä¿®æ”¹çš„æ¬„ä½åç¨±
- `old_value`: åŸå§‹å€¼
- `new_value`: æ–°å€¼
- `round_number`: è¼ªæ¬¡ç·¨è™Ÿ
- `change_reason`: è®Šæ›´åŸå› 

---

## ğŸ” é¿å…ã€Œæ¨™è¨˜éæœŸã€å•é¡Œ

### å•é¡Œå ´æ™¯

å‡è¨­ A/B/C ä¸‰ä½æ¨™è¨»è€…çš„ç­”æ¡ˆä¸ä¸€è‡´ï¼Œç³»çµ±æ¨™è¨˜ç‚ºã€Œéœ€é‡æ–°æª¢è¦–ã€ï¼š
1. A å…ˆä¿®æ”¹ç­”æ¡ˆä¸¦é€å‡º
2. ä¿®æ”¹å¾Œï¼ŒA/B è®Šæˆä¸€è‡´ (Local Alpha > 0.5)
3. B ç¨å¾Œæ‰“é–‹é é¢ï¼Œä»çœ‹åˆ°ã€Œä¸ä¸€è‡´ã€çš„èˆŠæ¨™è¨˜ âŒ

### è§£æ±ºæ–¹æ¡ˆ

æœ¬ç³»çµ±æ¡ç”¨ **è¼ªæ¬¡ + ç‰ˆæœ¬æ§åˆ¶** æ©Ÿåˆ¶ï¼š

1. **è¼ªæ¬¡éš”é›¢**ï¼šæ¯æ¬¡å»ºç«‹æ–°è¼ªæ¬¡æ™‚ï¼Œæœƒç”¢ç”Ÿç¨ç«‹çš„ `round_id`
2. **ä»»å‹™ç‹€æ…‹è¿½è¹¤**ï¼šæ¯å€‹ä»»å‹™æœ‰ç¨ç«‹çš„ç‹€æ…‹ (pending â†’ in_progress â†’ submitted)
3. **æ¸…é™¤å¿«å–**ï¼šæ¨™è¨»è€…é€å‡ºç­”æ¡ˆå¾Œï¼Œç³»çµ±æœƒæ¸…é™¤è©²è³‡æ–™çš„ä¸€è‡´æ€§åˆ†æ•¸å¿«å–
4. **ä¸é¡¯ç¤ºå³æ™‚åˆ†æ•¸**ï¼šæ¨™è¨»é é¢åªé¡¯ç¤º**ä»»å‹™å»ºç«‹æ™‚**çš„åˆ†æ•¸ï¼Œé¿å…æ··äº‚

### å·¥ä½œæµç¨‹

```
Round 1 å»ºç«‹ â†’ åˆ†é…ä»»å‹™ (å¸¶æœ‰ç•¶ä¸‹çš„ Local Alpha)
   â†“
A ä¿®æ”¹ç­”æ¡ˆ (Round 1, Version 2) â†’ é€å‡º â†’ ç‹€æ…‹è®Šç‚º submitted
   â†“
B æ‰“é–‹ä»»å‹™ â†’ çœ‹åˆ°ã€ŒRound 1 ä»»å‹™ï¼Œåˆ†æ•¸ 0.32ã€â†’ å¯é¸æ“‡ä¿®æ”¹æˆ–å …æŒ
   â†“
ç®¡ç†å“¡é‡æ–°è¨ˆç®— â†’ å»ºç«‹ Round 2 (å¦‚æœä»æœ‰ä¸ä¸€è‡´)
```

---

## ğŸ“‹ API ç«¯é»èªªæ˜

### GET /api/reannotation/queue

å–å¾—ä½¿ç”¨è€…çš„é‡æ¨™è¨»ä»»å‹™æ¸…å–®ã€‚

**Query Parameters:**
- `userId` (å¿…å¡«): ä½¿ç”¨è€… ID
- `projectId` (é¸å¡«): å°ˆæ¡ˆ ID
- `taskGroup` (é¸å¡«): ä»»å‹™åˆ†çµ„

**Response:**
```json
{
  "success": true,
  "data": {
    "tasks": [
      {
        "projectId": 1,
        "projectName": "ABCå…¬å¸_2023_æ°¸çºŒå ±å‘Š",
        "taskGroup": "group1",
        "roundNumber": 1,
        "tasks": [...]
      }
    ],
    "guidelines": {...},
    "stats": {
      "totalTasks": 10,
      "pendingTasks": 5,
      "submittedTasks": 5
    }
  }
}
```

### POST /api/reannotation/submit

é€å‡ºé‡æ¨™è¨»çµæœã€‚

**Request Body:**
```json
{
  "taskId": 123,
  "userId": 5,
  "sourceDataId": 456,
  "answers": {
    "promise_status": "Yes",
    "verification_timeline": "within_2_years"
  },
  "persistAnswer": false,
  "comment": "é‡æ–°æª¢è¦–å¾Œä¿®æ”¹ç­”æ¡ˆ"
}
```

**Response:**
```json
{
  "success": true,
  "data": {
    "taskId": 123,
    "changesCount": 2,
    "newVersion": 2,
    "submitted": true
  }
}
```

### POST /api/reannotation/create-round

å»ºç«‹æ–°çš„é‡æ¨™è¨»è¼ªæ¬¡ï¼ˆç®¡ç†å“¡å°ˆç”¨ï¼‰ã€‚

**Request Body:**
```json
{
  "userId": 1,
  "projectId": 10,
  "taskGroup": "group1",
  "threshold": 0.5,
  "assignAll": true
}
```

**Response:**
```json
{
  "success": true,
  "data": {
    "roundId": 5,
    "roundNumber": 1,
    "taskGroup": "group1",
    "inconsistentCount": 15,
    "tasksCreated": 45,
    "threshold": 0.5,
    "tasks": ["promise_status", "verification_timeline"]
  }
}
```

---

## â“ å¸¸è¦‹å•é¡Œ

### Q1: å¦‚æœæ¨™è¨»è€…å …æŒç­”æ¡ˆï¼Œæœƒç™¼ç”Ÿä»€éº¼ï¼Ÿ

å‹¾é¸ã€Œæˆ‘ä»å …æŒæˆ‘çš„åŸå§‹ç­”æ¡ˆã€å¾Œï¼š
- ç­”æ¡ˆ**ä¸æœƒ**è¢«é–å®šæˆ–å„ªå…ˆè™•ç†
- ç³»çµ±æœƒè¨˜éŒ„ `persist_answer = TRUE`
- ç®¡ç†å“¡å¯é€éå¯©è¨ˆæ—¥èªŒæŸ¥çœ‹å …æŒåŸå› 
- å¦‚æœå¤šæ¬¡é‡æ¨™è¨»å¾Œä»ä¸ä¸€è‡´ï¼Œå»ºè­°ç®¡ç†å“¡å¬é–‹æœƒè­°è¨è«–

### Q2: å¦‚ä½•è™•ç†æŒçºŒä¸ä¸€è‡´çš„è³‡æ–™ï¼Ÿ

å»ºè­°æµç¨‹ï¼š
1. Round 1: æ‰€æœ‰äººé‡æ–°æª¢è¦–
2. Round 2: å¦‚æœä»ä¸ä¸€è‡´ï¼Œå†æ¬¡é‡æ¨™è¨»
3. Round 3+: å¦‚æœæŒçºŒä¸ä¸€è‡´ï¼Œç®¡ç†å“¡æ‡‰ï¼š
   - å¬é–‹å…±è­˜æœƒè­°
   - æŒ‡å®šå°ˆå®¶ä»²è£ï¼ˆadjudicatorï¼‰
   - æª¢è¨æ¨™è¨»æŒ‡å¼•æ˜¯å¦ä¸å¤ æ˜ç¢º

### Q3: é‡æ¨™è¨»æœƒå½±éŸ¿åŸå§‹æ¨™è¨»è³‡æ–™å—ï¼Ÿ

**æœƒ**ã€‚é‡æ¨™è¨»æœƒ**ç›´æ¥æ›´æ–°** annotations è¡¨çš„è³‡æ–™ï¼Œä½†ï¼š
- æ‰€æœ‰è®Šæ›´éƒ½è¨˜éŒ„åœ¨ `reannotation_audit_log`
- ç‰ˆæœ¬è™Ÿæœƒéå¢ (`version`)
- å¯è¿½æº¯æ‰€æœ‰ä¿®æ”¹æ­·ç¨‹

### Q4: å¯ä»¥åªè®“éƒ¨åˆ†æ¨™è¨»è€…é‡æ¨™è¨»å—ï¼Ÿ

ç³»çµ±æ¡ç”¨**æ™ºæ…§åˆ†é…ç­–ç•¥**ï¼š
- **å°‘æ•¸æ´¾åŸå‰‡**ï¼šå¦‚æœä¸‰å€‹äººä¸­æœ‰ä¸€å€‹äººå’Œå…¶ä»–å…©å€‹äººä¸ä¸€æ¨£ï¼Œåªåˆ†é…çµ¦é‚£å€‹ä¸ä¸€æ¨£çš„äºº
- **å…¨å“¡é‡æª¢**ï¼šå¦‚æœä¸‰å€‹äººéƒ½ä¸ä¸€æ¨£ï¼Œåˆ†é…çµ¦å…¨éƒ¨ä¸‰å€‹äºº

é€™æ¨£å¯ä»¥æ¸›å°‘ä¸å¿…è¦çš„é‡æ¨™è¨»å·¥ä½œé‡ï¼ŒåŒæ™‚ç¢ºä¿ä¸€è‡´æ€§ã€‚

### Q5: ä¸€è‡´æ€§åˆ†æ•¸å¦‚ä½•è¨ˆç®—ï¼Ÿ

ä½¿ç”¨ **Krippendorff's Alpha (Nominal level)**ï¼š
- **Global Alpha**: æ•´å€‹å°ˆæ¡ˆåœ¨æŸå€‹ä»»å‹™çš„ä¸€è‡´æ€§
- **Local Alpha**: å–®ç­†è³‡æ–™åœ¨æŸå€‹ä»»å‹™çš„ä¸€è‡´æ€§

å…¬å¼ç´°ç¯€è«‹åƒè€ƒ [app/api/calculate-agreement/route.js](../app/api/calculate-agreement/route.js)ã€‚

---

## ğŸ› ï¸ æŠ€è¡“ç´°ç¯€

### å‰ç«¯é é¢

| è·¯å¾‘ | èªªæ˜ |
|------|------|
| `/reannotation` | é‡æ¨™è¨»ä»»å‹™åˆ—è¡¨ (æ¨™è¨»è€…) |
| `/reannotation/[taskId]` | é‡æ¨™è¨»è©³ç´°é é¢ (æ¨™è¨»è€…) |
| `/admin/reannotation` | é‡æ¨™è¨»ç®¡ç†é é¢ (ç®¡ç†å“¡) |

### å¾Œç«¯ API

| ç«¯é» | èªªæ˜ |
|------|------|
| `GET /api/reannotation/queue` | å–å¾—ä»»å‹™æ¸…å–® |
| `POST /api/reannotation/submit` | é€å‡ºé‡æ¨™è¨» |
| `POST /api/reannotation/create-round` | å»ºç«‹è¼ªæ¬¡ |

### è³‡æ–™åº«é·ç§»

```bash
# åŸ·è¡Œé·ç§»
npm run migrate:reannotation

# æˆ–æ‰‹å‹•åŸ·è¡Œ SQL
psql $DATABASE_URL < scripts/add-reannotation-feature.sql
```

---

## ğŸ“ æ³¨æ„äº‹é …

1. **å…ˆåŸ·è¡Œè³‡æ–™åº«é·ç§»**ï¼šé¦–æ¬¡ä½¿ç”¨å‰å¿…é ˆåŸ·è¡Œ `npm run migrate:reannotation`
2. **å»ºè­°åˆ†çµ„é€²è¡Œ**ï¼šå…ˆå®Œæˆ Group 1ï¼Œå†é€²è¡Œ Group 2ï¼Œé¿å…æ¨™è¨»è€…æ··äº‚
3. **é–€æª»è¨­å®š**ï¼šå»ºè­°å¾ 0.5 é–‹å§‹ï¼Œè¦–æƒ…æ³èª¿æ•´ (0.3-0.6)
4. **ä¸é¡¯ç¤ºä»–äººç­”æ¡ˆ**ï¼šé€™æ˜¯æ ¸å¿ƒè¨­è¨ˆåŸå‰‡ï¼Œé¿å…äº’ç›¸æŠ„ç­”æ¡ˆ
5. **å®šæœŸæª¢è¦–å¯©è¨ˆæ—¥èªŒ**ï¼šäº†è§£æ¨™è¨»è€…çš„ä¿®æ”¹æ¨¡å¼

---

## ğŸ¯ æœ€ä½³å¯¦è¸

1. **æ¼¸é€²å¼é‡æ¨™è¨»**ï¼š
   - Round 1: Group 1 (æ‰¿è«¾+æ™‚é–“)
   - Round 2: Group 2 (è­‰æ“š)
   - Round 3: é‡å°ä»ä¸ä¸€è‡´çš„é …ç›®å†æ¬¡é‡æ¨™

2. **è¨­å®šåˆç†é–€æª»**ï¼š
   - å¯¬é¬† (0.3-0.4): åªæ¨™è¨˜åš´é‡ä¸ä¸€è‡´
   - ä¸­ç­‰ (0.5): å¹³è¡¡æ•ˆç‡èˆ‡å“è³ª
   - åš´æ ¼ (0.6-0.7): è¿½æ±‚é«˜ä¸€è‡´æ€§

3. **è¿½è¹¤å …æŒç­”æ¡ˆ**ï¼š
   - å®šæœŸæª¢è¦– `persist_answer = TRUE` çš„æ¡ˆä¾‹
   - èˆ‡æ¨™è¨»è€…è¨è«–ï¼Œäº†è§£åˆ¤æ–·ä¾æ“š
   - å¿…è¦æ™‚æ›´æ–°æ¨™è¨»æŒ‡å¼•

4. **å¬é–‹å…±è­˜æœƒè­°**ï¼š
   - ç•¶ Round 3+ ä»ä¸ä¸€è‡´æ™‚
   - è¨è«–å…·é«”æ¡ˆä¾‹ï¼Œå»ºç«‹å…±è­˜
   - æ›´æ–°æ¨™è¨»æŒ‡å¼•æ–‡ä»¶

---

## ğŸ“ æ”¯æ´

å¦‚æœ‰å•é¡Œæˆ–å»ºè­°ï¼Œè«‹è¯ç¹«ç³»çµ±ç®¡ç†å“¡æˆ–è‡³ [GitHub Issues](https://github.com/anthropics/claude-code/issues) å›å ±ã€‚
